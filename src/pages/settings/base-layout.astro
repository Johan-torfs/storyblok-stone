---
import { useStoryblokApi, type SbBlokData } from "@storyblok/astro";
import SettingsLayout from "../../layouts/SettingsLayout.astro";
// @ts-ignore
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";

const storyblokApi = useStoryblokApi()
const response = await storyblokApi.get('cdn/stories/settings/base-layout', {
  version: import.meta.env.PUBLIC_VERCEL_ENV == 'production' ? 'published' : 'draft',
}).then((response: any ) => {
    return response;
}).catch((error: any) => {
    console.log(error);
});

const navigation = response.data.story.content.navigation;
---

<SettingsLayout>
    <Fragment slot="header">
        {navigation?.map((blok: SbBlokData) => {            
			return <StoryblokComponent blok={blok} />
		})}
    </Fragment>
</SettingsLayout>
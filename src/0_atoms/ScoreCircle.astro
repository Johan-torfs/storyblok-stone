---
import { storyblokEditable, type SbBlokData } from '@storyblok/astro';

interface StoryblokScoreCircle extends SbBlokData {
    component: "score_circle";
    score?: string;
    total?: string;
    color?: "primary"| "secondary" | "accent_1" | "accent_2" | "accent_3" | "accent_4" | "accent_5" | "white" | "black";
    gradient?: boolean;
}


interface Props {
    blok: StoryblokScoreCircle;
}

const { blok } = Astro.props;

const possibleColors = {
    primary: "bg-primary-700 dark:bg-primary-400",
    secondary: "bg-secondary-700 dark:bg-secondary-400",
    accent_1: "bg-accent-1-700 dark:bg-accent-1-400",
    accent_2: "bg-accent-2-700 dark:bg-accent-2-400",
    accent_3: "bg-accent-3-700 dark:bg-accent-3-400",
    accent_4: "bg-accent-4-700 dark:bg-accent-4-400",
    accent_5: "bg-accent-5-700 dark:bg-accent-5-400",
    white: "bg-white dark:bg-black",
    black: "bg-black dark:bg-white",
    default: "bg-white dark:bg-black"
}

const possibleGradients = {
    primary: "bg-gradient-to-b from-primary-800 to-primary-800/0 dark:from-primary-900 dark:to-primary-900/0",
    secondary: "bg-gradient-to-b from-secondary-800 to-secondary-800/0 dark:from-secondary-900 dark:to-secondary-900/0",
    accent_1: "bg-gradient-to-b from-accent-1-800 to-accent-1-800/0 dark:from-accent-1-900 dark:to-accent-1-900/0",
    accent_2: "bg-gradient-to-b from-accent-2-800 to-accent-2-800/0 dark:from-accent-2-900 dark:to-accent-2-900/0",
    accent_3: "bg-gradient-to-b from-accent-3-800 to-accent-3-800/0 dark:from-accent-3-900 dark:to-accent-3-900/0",
    accent_4: "bg-gradient-to-b from-accent-4-800 to-accent-4-800/0 dark:from-accent-4-900 dark:to-accent-4-900/0",
    accent_5: "bg-gradient-to-b from-accent-5-800 to-accent-5-800/0 dark:from-accent-5-900 dark:to-accent-5-900/0",
    white: "bg-gradient-to-b from-white to-white dark:from-black dark:to-black",
    black: "bg-gradient-to-b from-black to-black dark:from-white dark:to-white",
    default: "bg-white dark:bg-black"
}

const className = `
    ${possibleColors[blok.color ? blok.color : "default"]} ${blok.gradient ? possibleGradients[blok.color ? blok.color : "default"] : ""}
`.replace(/\s+/g, ' ').trim();
---

<div {...storyblokEditable(blok)} class:list={["flex flex-col justify-center items-center p-12 rounded-full", className]}>
    <div class="aspect-square h-20 flex flex-col justify-center items-center ">
        <div class="text-5xl text-white">{blok.score}</div>
        <div class="text-slate-400">{blok.total}</div>
    </div>
</div>
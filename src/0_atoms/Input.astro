---
import { storyblokEditable, type SbBlokData } from '@storyblok/astro';
import InputSvelte from './input/Input.svelte';
import InputRadio from './input/InputRadio.svelte';
import type { Color } from '../tailwind/types/Color';
import type { PaddingX, PaddingY } from '../tailwind/types/Padding';
import type { BorderRadius } from '../tailwind/types/Border';
import { getClassName, getPaddingXClasses, getPaddingYClasses, getBackgroundColorClasses, getHoverClasses, getPeerCheckedClasses, getBorderRadiusClasses } from '../tailwind/class_name_compiler';

interface StoryblokInput extends SbBlokData, Color, PaddingX, PaddingY, BorderRadius {
    component: "input";
    name?: string;
    value?: string;
    label?: string;
    type?: "text" | "email" | "password" | "number" | "tel" | "url" | "search" | "date" | "time" | "datetime-local" | "month" | "week" | "color" | "radio" | "checkbox" | "file" | "image" | "range" | "hidden";
}

interface Props {
    blok: StoryblokInput;
}

const { blok } = Astro.props;

const className = getClassName(blok, {
    decorators: [
        {decorator: getPaddingXClasses},
        {decorator: getPaddingYClasses},
        {decorator: getBorderRadiusClasses},
    ]
});

const classNameRadio = getClassName({...blok, hover: 'background', background_color_type: 'transpicuous'}, {
    decorators: [
        {decorator: getBackgroundColorClasses, options: {colorName: 'color'}},
        {decorator: getHoverClasses, options: {colorName: 'color', colorTypeName: 'background_color_type'}},
        {decorator: getPeerCheckedClasses, options: {colorName: 'color'}},
    ]
});
---


{blok.type == "radio" ? (
    <InputRadio
        className={className + ' ' + classNameRadio + ' aspect-square w-12 flex items-center justify-center'}
        blok={{name: blok.name, value: blok.value, label: blok.label}}
        storyblokEditableData={storyblokEditable(blok)}
        client:visible
    />
) : (
    <InputSvelte blok={blok} client:visible />
)
}